"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[604],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return h}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=c(n),h=a,f=u["".concat(s,".").concat(h)]||u[h]||p[h]||i;return n?r.createElement(f,o(o({ref:t},d),{},{components:n})):r.createElement(f,o({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5256:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],l={title:"How Raftt Works?"},s="How Raftt Works?",c={unversionedId:"intro/how_raftt_works",id:"intro/how_raftt_works",title:"How Raftt Works?",description:"Insert a diagram here, similar to this.png?alt=media&token=a9113cb6-4724-43b6-bfc8-8be882960a2d)",source:"@site/docs/intro/how_raftt_works.md",sourceDirName:"intro",slug:"/intro/how_raftt_works",permalink:"/docs/intro/how_raftt_works",tags:[],version:"current",frontMatter:{title:"How Raftt Works?"},sidebar:"tutorialSidebar",previous:{title:"Welcome to Raftt",permalink:"/docs/intro/raftt"},next:{title:"Getting Started",permalink:"/docs/basics"}},d=[{value:"Flows",id:"flows",children:[{value:"Spawning an Environment",id:"spawning-an-environment",children:[],level:3},{value:"Switching Between Branches",id:"switching-between-branches",children:[],level:3},{value:"Exposing an Environment (AS - maybe change it to something collaboration related)",id:"exposing-an-environment-as---maybe-change-it-to-something-collaboration-related",children:[],level:3}],level:2},{value:"High Level Architecture",id:"high-level-architecture",children:[{value:"Client Side Module",id:"client-side-module",children:[],level:3},{value:"Backend",id:"backend",children:[{value:"Environments Manager",id:"environments-manager",children:[],level:4}],level:3}],level:2},{value:"Key Concepts",id:"key-concepts",children:[{value:"Raftt&#39;s Containers",id:"raftts-containers",children:[],level:3},{value:"Raftt&#39;s Environments",id:"raftts-environments",children:[],level:3},{value:"File Syncing",id:"file-syncing",children:[],level:3}],level:2}],p={toc:d};function u(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"how-raftt-works"},"How Raftt Works?"),(0,i.kt)("p",null,"Insert a diagram here, similar to ",(0,i.kt)("a",{parentName:"p",href:"https://docs.velocity.tech/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2F-M_L7DzkSRGbZ1imbELK%2Fuploads%2FFh2JjG4hQfYIIC2Un5bK%2FVelocity%20-%20customer%20setup-Overview%20(1).png?alt=media&token=a9113cb6-4724-43b6-bfc8-8be882960a2d"},"this")),(0,i.kt)("p",null,"To explain how Raftt works, we'll start by describing a few flows, than explain some key concepts and at the end, explain Raftt's high level architecture"),(0,i.kt)("h2",{id:"flows"},"Flows"),(0,i.kt)("h3",{id:"spawning-an-environment"},"Spawning an Environment"),(0,i.kt)("p",null,"When the user spawns a new environment using ",(0,i.kt)("inlineCode",{parentName:"p"},"raftt up")," from the context of a git repo, the following actions happen -"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Raftt's CLI finds raftt.yml, Raftt's configuration file"),(0,i.kt)("li",{parentName:"ol"},"Using the address defined in the file, it sends a request to Raftt's backend to prepare an environment",(0,i.kt)("ol",{parentName:"li"},(0,i.kt)("li",{parentName:"ol"},"For more details on %3cRaftt's Backend%3d see ",(0,i.kt)("a",{parentName:"li",href:"#"},"below")))),(0,i.kt)("li",{parentName:"ol"},"Raftt back")),(0,i.kt)("h3",{id:"switching-between-branches"},"Switching Between Branches"),(0,i.kt)("p",null,"Explain the user side and then explain what actually happens (switching to a different branch and back)"),(0,i.kt)("h3",{id:"exposing-an-environment-as---maybe-change-it-to-something-collaboration-related"},"Exposing an Environment (AS - maybe change it to something collaboration related)"),(0,i.kt)("p",null,"Explain the user side and then explain what actually happens"),(0,i.kt)("h2",{id:"high-level-architecture"},"High Level Architecture"),(0,i.kt)("p",null,"Raftt's solution has two main modules - the client-side module and the backend module."),(0,i.kt)("h3",{id:"client-side-module"},"Client Side Module"),(0,i.kt)("p",null,"The client side module runs on your dev machine and includes two sub-modules - the CLI and the daemon.",(0,i.kt)("br",{parentName:"p"}),"\n","The CLI is used by the users to run Raftt commands.",(0,i.kt)("br",{parentName:"p"}),"\n","The daemon runs in the background and performs several tasks - syncing local files with the ",(0,i.kt)("a",{parentName:"p",href:"/docs/config/dev_container"},"dev container"),", monitoring changes in the git status, communication with the backend etc."),(0,i.kt)("p",null,"The client self-updates automatically once a new version is available."),(0,i.kt)("h3",{id:"backend"},"Backend"),(0,i.kt)("h4",{id:"environments-manager"},"Environments Manager"),(0,i.kt)("p",null,"This module manages the state machine of the different environments.",(0,i.kt)("br",{parentName:"p"}),"\n","It spawned environments, takes them down, and puts them to sleep and wakes them up when necessary."),(0,i.kt)("h2",{id:"key-concepts"},"Key Concepts"),(0,i.kt)("h3",{id:"raftts-containers"},"Raftt's Containers"),(0,i.kt)("p",null,"Raftt runs your containers, but slightly modifies the container behavior to improve the development experience.",(0,i.kt)("br",{parentName:"p"}),"\n","The actual main process of the container is Raftt's process called lifeguard, instead of the process defined by you in the Docker Compose file.",(0,i.kt)("br",{parentName:"p"}),"\n","lifeguard runs your main process when it starts, but doesn't die when the process dies. This behavior allows much better debugging capabilities as it prevents the container from terminating and losing the state it had when crashing.",(0,i.kt)("br",{parentName:"p"}),"\n","Keeping the container up also allows better development velocity, because you don't need to spawn a container every time you restart the main process.",(0,i.kt)("br",{parentName:"p"}),"\n","Note that ",(0,i.kt)("a",{parentName:"p",href:"/docs/cli_reference/#raftt-stop"},(0,i.kt)("inlineCode",{parentName:"a"},"raftt stop"))," and ",(0,i.kt)("a",{parentName:"p",href:"/docs/cli_reference/#raftt-restart"},(0,i.kt)("inlineCode",{parentName:"a"},"raftt restart"))," only affect the user's main process, not the container itself, and ",(0,i.kt)("a",{parentName:"p",href:"/docs/cli_reference/#raftt-rebuild"},(0,i.kt)("inlineCode",{parentName:"a"},"raftt rebuild"))," rebuilds and reloads the container itself."),(0,i.kt)("h3",{id:"raftts-environments"},"Raftt's Environments"),(0,i.kt)("p",null,"Describe the environments and why it's OK it's in our cloud",(0,i.kt)("br",{parentName:"p"}),"\n","Isolation\nSecurity"),(0,i.kt)("h3",{id:"file-syncing"},"File Syncing"))}u.isMDXComponent=!0}}]);