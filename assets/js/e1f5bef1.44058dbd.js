"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[604],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(n),f=r,u=m["".concat(s,".").concat(f)]||m[f]||d[f]||a;return n?o.createElement(u,i(i({ref:t},p),{},{components:n})):o.createElement(u,i({ref:t},p))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5256:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=n(7462),r=(n(7294),n(3905));const a={title:"How Raftt Works?"},i="How Raftt Works?",l={unversionedId:"intro/how_raftt_works",id:"intro/how_raftt_works",title:"How Raftt Works?",description:'Raftt supports two basic modes of operation - "connect" and "orchestration". In "connect" mode, the environment is already deployed by other infrastructure, and Raftt is used to enable development on top. In orchestration mode, Raftt also orchestrates the environment. Beyond that difference, the modes are remarkably similar.',source:"@site/docs/intro/how_raftt_works.md",sourceDirName:"intro",slug:"/intro/how_raftt_works",permalink:"/intro/how_raftt_works",draft:!1,tags:[],version:"current",frontMatter:{title:"How Raftt Works?"},sidebar:"tutorialSidebar",previous:{title:"Welcome to Raftt",permalink:"/"},next:{title:"Install Raftt",permalink:"/intro/installation"}},s={},c=[{value:"Connecting to an Environment",id:"connecting-to-an-environment",level:2},{value:"How is Spawning an Environment Using Raftt Different?",id:"how-is-spawning-an-environment-using-raftt-different",level:2},{value:"Under the Hood of a Running Environment",id:"under-the-hood-of-a-running-environment",level:2}],p={toc:c};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"how-raftt-works"},"How Raftt Works?"),(0,r.kt)("p",null,'Raftt supports two basic modes of operation - "connect" and "orchestration". In "connect" mode, the environment is already deployed by other infrastructure, and Raftt is used to enable development on top. In ',(0,r.kt)("inlineCode",{parentName:"p"},"orchestration")," mode, Raftt also orchestrates the environment. Beyond that difference, the modes are remarkably similar."),(0,r.kt)("p",null,"We'll go through the mechanics of the ",(0,r.kt)("inlineCode",{parentName:"p"},"raftt connect")," operation, and note where ",(0,r.kt)("inlineCode",{parentName:"p"},"raftt up")," behaves a bit differently."),(0,r.kt)("p",null,"This is a concise explanation, more info is available under ",(0,r.kt)("a",{parentName:"p",href:"../concepts/"},"Key Concepts"),"."),(0,r.kt)("p",{align:"center"},(0,r.kt)("img",{src:"https://raftt-resources.s3.eu-central-1.amazonaws.com/docs/Other/solution_illustration.png",alt:"Raftt solution illustration"})),(0,r.kt)("h2",{id:"connecting-to-an-environment"},"Connecting to an Environment"),(0,r.kt)("p",null,"When a user runs ",(0,r.kt)("inlineCode",{parentName:"p"},"raftt connect <namespace>"),", the following actions happen:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Raftt's CLI brings up Raftt's daemon, which handles all access to the remote environment controller, including file syncing and traffic handling."),(0,r.kt)("li",{parentName:"ol"},"The daemon uses the user's KubeConfig to deploy Raftt's environment controller in the specified namespace."),(0,r.kt)("li",{parentName:"ol"},"The daemon initializes the controller with the current user and repository."),(0,r.kt)("li",{parentName:"ol"},"The contents of the current repo, including untracked files, are synced to the environment controller."),(0,r.kt)("li",{parentName:"ol"},"A persistent connection is created between the daemon and the environment controller."),(0,r.kt)("li",{parentName:"ol"},"Over the connection, a continuous low-latency file sync is set up."),(0,r.kt)("li",{parentName:"ol"},'A "deploy" request is sent to the environment controller, which leads to...'),(0,r.kt)("li",{parentName:"ol"},"An evaluation in the environment controller of the ",(0,r.kt)("inlineCode",{parentName:"li"},".raftt")," file - Raftt's primary configuration file, defining the behavior of the Kubernetes resources during development."),(0,r.kt)("li",{parentName:"ol"},"Deployment of resources passed to ",(0,r.kt)("inlineCode",{parentName:"li"},"deploy_on_connect"),' - usually configurations or auxiliary workloads that are needed for development but not present in the "clean" environment.')),(0,r.kt)("p",null,"At this point, the flow is complete, and the user can start working with their environment - converting workloads to ",(0,r.kt)("a",{parentName:"p",href:"/concepts/dev_mode"},"dev mode")," and iterating on them."),(0,r.kt)("h2",{id:"how-is-spawning-an-environment-using-raftt-different"},"How is Spawning an Environment Using Raftt Different?"),(0,r.kt)("p",null,"When using ",(0,r.kt)("inlineCode",{parentName:"p"},"raft up")," there are some slight differences:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The daemon contacts Raftt's Environment Manager, which provisions a new Kubernetes namespace, deploys the environment controller in it, and initializes it."),(0,r.kt)("li",{parentName:"ol"},"The deploy request causes, along with evaluation of the ",(0,r.kt)("inlineCode",{parentName:"li"},".raftt")," file, as before, the deployment of all Kubernetes resources passed to the ",(0,r.kt)("inlineCode",{parentName:"li"},"deploy")," method - generally, the entire environment.",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"In this mode, this step can also include things like mounting the synced source from the local machine, seeding databases, building images or running scripts."))),(0,r.kt)("li",{parentName:"ol"},"When using ",(0,r.kt)("inlineCode",{parentName:"li"},"raftt up")," all workloads are always in ",(0,r.kt)("a",{parentName:"li",href:"/concepts/dev_mode"},"dev mode"),".")),(0,r.kt)("h2",{id:"under-the-hood-of-a-running-environment"},"Under the Hood of a Running Environment"),(0,r.kt)("p",null,"Even after the environment has spawned, our job is not yet done. We make sure that your work is as easy and seamless as possible. We keep the remote environment synced with whatever you do locally by ",(0,r.kt)("a",{parentName:"p",href:"/concepts/file_syncing"},"syncing file changes")," from the repo folder. The ",(0,r.kt)("a",{parentName:"p",href:"/concepts/port_map"},"port mapping")," between your machine's localhost and the containers in the remote environment allows accessing the env using any tool you are used to working with locally. We even enhance ",(0,r.kt)("a",{parentName:"p",href:"/concepts/containers"},"the containers")," to allow easier access and debugging."))}d.isMDXComponent=!0}}]);