"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[910],{3905:function(e,t,n){n.d(t,{Zo:function(){return h},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),s=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},h=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),p=s(n),d=a,m=p["".concat(c,".").concat(d)]||p[d]||u[d]||o;return n?r.createElement(m,i(i({ref:t},h),{},{components:n})):r.createElement(m,i({ref:t},h))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5317:function(e,t,n){n.r(t),n.d(t,{assets:function(){return h},contentTitle:function(){return c},default:function(){return d},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],l={title:"Git Workflow Integration"},c="Git Workflow Integration",s={unversionedId:"concepts/git_workflows",id:"concepts/git_workflows",title:"Git Workflow Integration",description:"One of Raftt's unique benefits is its integration with your Git workflow, allowing you to switch between branches without worrying about the state of your dev environment. When leaving a branch while having an active environment, the whole env is deactivated but kept for future use, while the new branch enjoys a clean environment.",source:"@site/docs/concepts/git_workflows.md",sourceDirName:"concepts",slug:"/concepts/git_workflows",permalink:"/docs/concepts/git_workflows",tags:[],version:"current",frontMatter:{title:"Git Workflow Integration"},sidebar:"tutorialSidebar",previous:{title:"Key Concepts",permalink:"/docs/concepts"},next:{title:"Raftt's Containers",permalink:"/docs/concepts/containers"}},h={},u=[{value:"New Branch",id:"new-branch",level:2},{value:"Branch with Deactivated Env",id:"branch-with-deactivated-env",level:2},{value:"Idle Environments",id:"idle-environments",level:2}],p={toc:u};function d(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"git-workflow-integration"},"Git Workflow Integration"),(0,o.kt)("p",null,"One of Raftt's unique benefits is its integration with your Git workflow, allowing you to switch between branches without worrying about the state of your dev environment. When leaving a branch while having an active environment, the whole env is deactivated but kept for future use, while the new branch enjoys a clean environment."),(0,o.kt)("p",null,"In the following section, we'll describe what happens when users switch to a different branch using ",(0,o.kt)("inlineCode",{parentName:"p"},"git checkout"),".\nThe details differ depending on whether the checked-out branch has a previously deactivated environment or not:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"A new branch - the newly checked-out branch doesn't have a deactivated environment."),(0,o.kt)("li",{parentName:"ol"},"A branch with a deactivated env - the newly checked-out branch already had an active env that was deactivated by checking out another branch.")),(0,o.kt)("h2",{id:"new-branch"},"New Branch"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"The user checks out the code on the local machine."),(0,o.kt)("li",{parentName:"ol"},"Raftt recognizes it using githooks and notifies Raftt's backend."),(0,o.kt)("li",{parentName:"ol"},"The backend deactivates the running environment."),(0,o.kt)("li",{parentName:"ol"},"The container starts a new environment for the new branch, similar to what is described in ",(0,o.kt)("a",{parentName:"li",href:"/docs/intro/how_raftt_works#spawning-an-environment"},"how Raftt works?"),".")),(0,o.kt)("h2",{id:"branch-with-deactivated-env"},"Branch with Deactivated Env"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"The user checks out the code in the local machine."),(0,o.kt)("li",{parentName:"ol"},"Raftt recognizes it using githooks and notifies Raftt's backend."),(0,o.kt)("li",{parentName:"ol"},'The backend "deactivates" the running environment.'),(0,o.kt)("li",{parentName:"ol"},'Subsequently, the backend recognizes that the new branch has a "deactivated" environment.'),(0,o.kt)("li",{parentName:"ol"},"If the environment is ",(0,o.kt)("a",{parentName:"li",href:"#idle-environments"},'"frozen"'),", the environment is woken up:",(0,o.kt)("ol",{parentName:"li"},(0,o.kt)("li",{parentName:"ol"},"A new environment controller is built."),(0,o.kt)("li",{parentName:"ol"},"All of its containers are loaded."),(0,o.kt)("li",{parentName:"ol"},"The containers' states are restored from backup."),(0,o.kt)("li",{parentName:"ol"},"The storage is restored from backup.")))),(0,o.kt)("p",null,"As you may notice, the first three steps remain the same in both configurations - regardless of the branch state."),(0,o.kt)("h2",{id:"idle-environments"},"Idle Environments"),(0,o.kt)("p",null,"Environments that are idle for too long can become ",(0,o.kt)("a",{parentName:"p",href:"#idle-environments"},'"frozen"'),'. This keeps the data stored but saves the computing resources. Moreover, you can always come back to a "frozen" environment - it will just take slightly longer.'),(0,o.kt)("p",null,"Environments are also frozen when ",(0,o.kt)("inlineCode",{parentName:"p"},"raftt down")," is run in a repo with an active Raftt environment. Running ",(0,o.kt)("inlineCode",{parentName:"p"},"raftt down -d")," destroys the environment without keeping the data."),(0,o.kt)("p",null,"When freezing the environment, Raftt performs the following operations:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"The containers' states are backed up."),(0,o.kt)("li",{parentName:"ol"},"The storage is backed up."),(0,o.kt)("li",{parentName:"ol"},"The containers are taken down.")),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Raftt freezes the environment in the background and wakes them up as needed - this isn't something you need to track manually."))))}d.isMDXComponent=!0}}]);